# 1 - Профиль нагрузки и Сценарии

Оценка производится для организации численностью **50 сотрудников**.

## 1.1 - Сценарии использования

1. **Утренний пик (9:00 - 10:00):**
    - Все сотрудники заходят в систему (Login).
    - Открывают Dashboard и Канбан (GET запросы).
    - Активность: Чтение — 90%, Запись — 10%.

2. **Активная работа (Sprint Planning):**
    - Руководители массово создают задачи.
    - Исполнители меняют статусы (Drag-n-Drop).
    - Активность: Чтение — 50%, Запись — 50%.

3. **Фоновая активность:**
    - Периодическое обновление статусов, поиск коллег в реестре.

## 1.2 - Расчетная нагрузка (Capacity Planning)

| Параметр                      | Значение          | Обоснование                                      |
| :---------------------------- | :---------------- | :----------------------------------------------- |
| DAU (Daily Active Users)      | 50                | Весь штат компании.                              |
| CCU (Concurrent Users)        | 20                | Одновременно активные пользователи в пике.       |
| Среднее кол-во запросов       | 10 req/min на юзера | Переходы по страницам, действия.                |
| Пиковый RPS (API)             | ~5-10 RPS         | (20 юзеров * 15 req) / 60 сек.                   |
| Объем данных в БД             | < 1 ГБ / год      | Текстовые данные задач и сотрудников.            |

**Вывод:** Для обслуживания такой нагрузки достаточно одного инстанса сервера (даже минимальной конфигурации: 1 vCPU, 512MB RAM) и стандартного пула соединений PostgreSQL.

# 2 - Требования к производительности (SLA)

Несмотря на низкую нагрузку, система должна ощущаться "мгновенной".

1. **API Latency:**
    - Чтение списка задач: **< 200 мс** (95-й перцентиль).
    - Создание/Обновление задачи: **< 500 мс**.
    - Поиск сотрудников: **< 150 мс**.

2. UI Performance:
    - Time to Interactive (TTI): **< 1.5 сек**.
    - Рендеринг списка (100 задач): **< 100 мс**.
    - Drag-and-Drop отзывчивость: **< 16 мс** (60 FPS) визуально.

# 3 - Меры защиты и Оптимизация

## 3.1 - Кэширование

Так как данные меняются часто (статусы задач), агрессивное кэширование не применяется к бизнес-данным.

- **Browser Cache:** Применяется только для статики (JS, CSS, Images) — `Cache-Control: max-age=31536000`.
- **In-Memory Cache (Server):** Справочник сотрудников кэшируется на 10 минут, так как меняется редко.

## 3.2 - Ограничения (Throttling)

Для защиты от случайных зацикливаний скриптов или "дребезга контактов" (double click).

- **API Rate Limit:** 200 запросов в минуту с одного IP.
- **Debounce (UI):** Поиск по сотрудникам отправляет запрос не чаще чем раз в **300 мс** после окончания ввода.

## 3.3 - Работа с БД

- Использование индексов на полях: `Status`, `AssigneeId`, `ProjectId`.
- `AsNoTracking()` для всех GET-запросов (чтение без оверхеда EF Core).